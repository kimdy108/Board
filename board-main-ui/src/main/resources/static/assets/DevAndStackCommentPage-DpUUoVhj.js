import{s as q}from"./index-K56FDctV.js";import{s as d}from"./index-BAKYOd6c.js";import{s as S}from"./index-BvRL5P7J.js";import{x as I,y as L,t as p,aN as O,o as i,f as V,w as z,j as l,e as c,k as R,r as H,F as J,n as m,u as r,A as C,a7 as g,D as A,z as w}from"./index-ELgps0j8.js";import"./index-DwJEJvq7.js";const K={class:"text-left divide-y ml-5"},Q={key:0},W={class:"font-bold mt-5"},X={class:"text-xl"},Y={class:"text-2xl mt-3"},Z={key:1},ee={key:0,class:"flex justify-end"},te={key:1,class:"flex justify-end"},se={class:"mb-5 ml-5"},ae={class:"flex justify-end mr-1"},ie={__name:"DevAndStackCommentPage",props:{showModal:Boolean,boardGuid:String},emits:{closeCommentModal:Boolean},setup(G,{emit:h}){const k=G,T=h,x=I(),v=L(),o=p(""),u=p(!1),a=p(""),n=p(""),b=p([]),M=()=>{b.value=[],o.value="",u.value=!1,a.value="",n.value=""},_=()=>{M(),T("closeCommentModal")},j=t=>{u.value=!0,a.value=t.boardComment,n.value=t.boardCommentGuid},D=()=>{u.value=!1,a.value="",n.value=""},U=t=>{const e=x.getUserAccess.ugd;return e?w(e)===t:!1},F=t=>{const e=x.getUserAccess.ugd;return e?w(e)===t||w(x.getUserRole)==="manager":!1},P=()=>{o.value===""||o.value===null?v.setToastValue({severity:"warn",summary:"댓글 등록",detail:"댓글을 입력해주세요.",life:3e3}):B()},$=()=>{a.value===""||a.value===null?v.setToastValue({severity:"warn",summary:"댓글 등록",detail:"댓글을 입력해주세요.",life:3e3}):E()},B=async()=>{await C.requestAPI({headers:{accept:"application/json"},method:"POST",url:"/board/dev/stack/comment/regist",data:{boardGuid:k.boardGuid,comment:o.value}})==="success"&&(v.setToastValue({severity:"success",summary:"댓글 등록",detail:"댓글 등록에 성공했습니다.",life:3e3}),o.value="",u.value=!1,a.value="",n.value="",y())},E=async()=>{await C.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/board/dev/stack/comment/update",data:{commentGuid:n.value,commentString:a.value}})==="success"&&(v.setToastValue({severity:"success",summary:"댓글 수정",detail:"댓글 수정에 성공했습니다.",life:3e3}),u.value=!1,o.value="",a.value="",n.value="",y())},N=async t=>{await C.requestAPI({headers:{accept:"application/json"},method:"DELETE",url:`/board/dev/stack/comment/delete/${t}`})==="success"&&(v.setToastValue({severity:"success",summary:"댓글 삭제",detail:"댓글이 삭제되었습니다.",life:3e3}),o.value="",u.value=!1,a.value="",n.value="",y())},y=async()=>{const t=await C.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/board/dev/stack/comment/list/all",params:{developmentStackGuid:k.boardGuid}});for(let e in t)t[e].boardCommentDate=t[e].boardCommentDate.split("T")[0];b.value=t};return O(()=>k.showModal,t=>{t&&y()}),(t,e)=>(i(),V(r(q),{visible:G.showModal,modal:"",closable:!1,class:"w-11/12"},{default:z(()=>[e[5]||(e[5]=l("div",{class:"text-left mb-10 ml-5"},[l("h2",{class:"text-4xl"},"댓글")],-1)),l("div",K,[b.value.length===0?(i(),c("div",Q,e[4]||(e[4]=[l("div",{class:"text-2xl font-bold mt-5 mb-5"},"등록된 댓글이 없습니다.",-1)]))):R("",!0),(i(!0),c(J,null,H(b.value,s=>(i(),c("div",{key:s.boardCommentGuid,class:"mb-5"},[l("div",W,g(s.boardCommentMemberNickName),1),l("div",X,g(s.boardCommentDate),1),l("div",Y,[u.value&&n.value===s.boardCommentGuid?(i(),V(r(S),{key:0,class:"w-full mb-1",type:"text",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=f=>a.value=f)},null,8,["modelValue"])):(i(),c("div",Z,g(s.boardComment),1))]),u.value&&n.value===s.boardCommentGuid?(i(),c("div",ee,[m(r(d),{label:"수정",class:"mr-2",severity:"info",onClick:e[1]||(e[1]=f=>$())}),m(r(d),{label:"취소",class:"mr-2",severity:"danger",onClick:e[2]||(e[2]=f=>D())})])):(i(),c("div",te,[m(r(d),{label:"수정",class:"mr-2",severity:"info",onClick:f=>j(s),style:A(U(s.boardCommentMemberGuid)?"":"display: none")},null,8,["onClick","style"]),m(r(d),{label:"삭제",class:"mr-2",severity:"danger",onClick:f=>N(s.boardCommentGuid),style:A(F(s.boardCommentMemberGuid)?"":"display: none")},null,8,["onClick","style"])]))]))),128))]),e[6]||(e[6]=l("hr",{class:"mb-5 ml-5"},null,-1)),l("div",se,[m(r(S),{class:"w-11/12",type:"text",modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value=s)},null,8,["modelValue"]),m(r(d),{onClick:P,class:"ml-5",label:"등록"})]),e[7]||(e[7]=l("hr",{class:"mb-5 ml-5"},null,-1)),l("div",ae,[m(r(d),{label:"닫기",onClick:_})])]),_:1},8,["visible"]))}};export{ie as default};
