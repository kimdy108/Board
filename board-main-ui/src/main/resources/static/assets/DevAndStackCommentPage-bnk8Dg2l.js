import{s as u}from"./index-BUPveENK.js";import{s as c,a as I}from"./index-Daet33y_.js";import{s as S}from"./index-POF9V-PZ.js";import{q as M,C as N,t as B,v,z as O,o as C,e as g,j as d,n as a,w,u as l,G as h,F as L,D as k,A as f}from"./index-rWrCVdvU.js";import"./index-C8irRjjW.js";import"./index-tOX5CAHA.js";import"./index-CiqZlgx1.js";const R={class:"card"},H={key:0,class:"flex ml-16 mr-16"},J={key:1,class:"flex ml-16 mr-16"},K={class:"text-left mr-16 flex justify-end"},te={__name:"DevAndStackCommentPage",props:{boardGuid:String},setup(G){const y=G,A=M(),b=N(),m=B(),x=v([]),n=v(""),r=v(!1),o=v(""),i=v(""),V=t=>{const e=b.getUserAccess.ugd;return e?k(e)===t:!1},T=t=>{const e=b.getUserAccess.ugd;return e?k(e)===t||k(b.getUserRole)==="manager":!1},D=()=>{n.value===""||n.value===null?m.setToastValue({severity:"warn",summary:"댓글 등록",detail:"댓글을 입력해주세요.",life:3e3}):F()},$=()=>{o.value===""||o.value===null?m.setToastValue({severity:"warn",summary:"댓글 수정",detail:"댓글을 입력해주세요.",life:3e3}):U()},P=(t,e)=>{r.value=!0,i.value=t,o.value=e},z=()=>{r.value=!1,o.value="",i.value=""},E=()=>{const t=y.boardGuid;A.push({name:"DevAndStackViewPage",params:{boardGuid:t}}).catch(()=>{console.log("DevAndStackViewPageError")})},F=async()=>{await f.requestAPI({headers:{accept:"application/json"},method:"POST",url:"/board/dev/stack/comment/regist",data:{boardGuid:y.boardGuid,comment:n.value}})==="success"&&(m.setToastValue({severity:"success",summary:"댓글 등록",detail:"댓글 등록에 성공했습니다.",life:3e3}),n.value="",r.value=!1,o.value="",i.value="",p())},U=async()=>{await f.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/board/dev/stack/comment/update",data:{commentGuid:i.value,commentString:o.value}})==="success"&&(m.setToastValue({severity:"success",summary:"댓글 수정",detail:"댓글 수정에 성공했습니다.",life:3e3}),r.value=!1,n.value="",o.value="",i.value="",p())},j=async t=>{await f.requestAPI({headers:{accept:"application/json"},method:"DELETE",url:`/board/dev/stack/comment/delete/${t}`})==="success"&&(m.setToastValue({severity:"success",summary:"댓글 삭제",detail:"댓글이 삭제되었습니다.",life:3e3}),n.value="",r.value=!1,o.value="",i.value="",p())},p=async()=>{const t=await f.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/board/dev/stack/comment/list/all",params:{developmentStackGuid:y.boardGuid}});for(let e in t)t[e].boardCommentDate=t[e].boardCommentDate.split("T")[0];x.value=t};return O(()=>{p()}),(t,e)=>(C(),g(L,null,[e[6]||(e[6]=d("div",{class:"text-left ml-16 mt-16 mb-10"},[d("h2",{class:"text-8xl mb-5 text-black"},"댓글")],-1)),d("div",R,[a(l(I),{class:"ml-16 mr-16",value:x.value,paginator:"",rows:5,tableStyle:"min-width: 50rem"},{default:w(()=>[a(l(c),{field:"boardComment",header:"댓글내용",style:{width:"50%"}}),a(l(c),{field:"boardCommentMemberNickName",header:"작성자",style:{width:"15%"}}),a(l(c),{field:"boardCommentDate",header:"작성일",style:{width:"15%"}}),a(l(c),{style:{width:"10%"}},{body:w(s=>[a(l(u),{label:"수정",rounded:"",class:"mr-2",severity:"info",onClick:q=>P(s.data.boardCommentGuid,s.data.boardComment),style:h(V(s.data.boardCommentMemberGuid)?"":"display: none")},null,8,["onClick","style"])]),_:1}),a(l(c),{style:{width:"10%"}},{body:w(s=>[a(l(u),{label:"삭제",rounded:"",class:"mr-2",severity:"danger",onClick:q=>j(s.data.boardCommentGuid),style:h(T(s.data.boardCommentMemberGuid)?"":"display: none")},null,8,["onClick","style"])]),_:1})]),_:1},8,["value"])]),e[7]||(e[7]=d("hr",{class:"mt-5 ml-16 mr-16 mb-5"},null,-1)),r.value?(C(),g("div",J,[a(l(S),{style:{width:"1350px",height:"50px","font-size":"20px"},modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value=s)},null,8,["modelValue"]),a(l(u),{label:"수정",size:"large",severity:"info",style:{width:"65px"},onClick:e[3]||(e[3]=s=>$())}),a(l(u),{label:"취소",size:"large",style:{width:"65px"},onClick:e[4]||(e[4]=s=>z())})])):(C(),g("div",H,[a(l(S),{style:{width:"1350px",height:"50px","font-size":"20px"},modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s)},null,8,["modelValue"]),a(l(u),{label:"등록",size:"large",style:{width:"65px"},onClick:e[1]||(e[1]=s=>D())})])),e[8]||(e[8]=d("hr",{class:"mt-5 ml-16 mr-16 mb-10"},null,-1)),d("div",K,[a(l(u),{label:"뒤로가기",size:"large",class:"mr-2",onClick:e[5]||(e[5]=s=>E())})])],64))}};export{te as default};
