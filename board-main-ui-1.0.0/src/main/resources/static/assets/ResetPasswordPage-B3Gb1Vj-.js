import{_ as V}from"./board-BFWOEN-2.js";import{s as b}from"./index-DYQKO0NT.js";import{s as u,a as v}from"./index-oYVlSIy2.js";import{s as w}from"./index-DUVqnvLL.js";import{p as B,q as t,u as l,d as x,h as a,l as s,w as o,o as I,s as k,A as C,t as h,z as G}from"./index-MLJOWxPO.js";import"./index-CHNytka8.js";const L={key:0},$={class:"bg-cover bg-center bg-fixed"},z={class:"h-screen flex justify-center items-center"},D={class:"w-full sm:w-80 flex flex-col gap-6 shadow-lg w-full p-16 md:w-1/3 lg:w-1/4"},E={class:"flex items-center"},R={key:1},M={class:"bg-cover bg-center bg-fixed"},F={class:"h-screen flex justify-center items-center"},H={class:"w-full sm:w-80 flex flex-col gap-6 shadow-lg w-full p-16 md:w-1/3 lg:w-1/4"},Z={__name:"ResetPasswordPage",setup(J){const y=B();let _=t(!1);const d=t(!1),c=t(!1),i=t(""),p=t(""),g=t(""),m=t("");let n=null;const P=t(null),A=()=>{y.push({name:"LoginPage"}).catch(()=>{console.log("loginerror")})},N=()=>{i.value==""?alert("noID"):p.value==""?alert("noPhone"):T()},U=()=>{g.value===m.value?q():alert("비밀번호가 일치하지 않습니다.")},S=()=>{d.value=!d.value},j=()=>{c.value=!c.value},T=async()=>{try{n=await C.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/member/check/reset/password",params:{id:h(i.value),userPhone:h(p.value)}}),G(n.memberId)===i.value?(P.value=n,_.value=!0):alert("NoUser")}catch(f){console.error("API 호출 오류:",f),alert("API 호출에 실패했습니다.")}},q=async()=>{try{n=await C.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/member/reset/password",data:{userId:P.value.memberId,userGuid:P.value.memberGuid,password:h(m.value)}}),n==="success"?(alert("수정이 완료되었습니다."),y.push({name:"LoginPage"}).catch(()=>{console.log("loginerror")})):alert("NoUser")}catch(f){console.error("API 호출 오류:",f),alert("API 호출에 실패했습니다.")}};return(f,e)=>l(_)?(I(),x("div",R,[a("div",M,[a("div",F,[a("div",H,[e[9]||(e[9]=a("img",{src:V,class:"mb-10"},null,-1)),s(l(v),null,{default:o(()=>[s(l(u),null,{default:o(()=>e[7]||(e[7]=[a("i",{class:"pi pi-lock"},null,-1)])),_:1}),s(l(w),{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=r=>g.value=r),type:d.value?"text":"password",placeholder:"비밀번호",autofocus:"",fluid:""},null,8,["modelValue","type"]),s(l(u),null,{default:o(()=>[a("i",{class:k(d.value?"pi pi-eye":"pi pi-eye-slash"),onClick:S},null,2)]),_:1})]),_:1}),s(l(v),null,{default:o(()=>[s(l(u),null,{default:o(()=>e[8]||(e[8]=[a("i",{class:"pi pi-lock"},null,-1)])),_:1}),s(l(w),{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=r=>m.value=r),type:c.value?"text":"password",placeholder:"비밀번호 확인",fluid:""},null,8,["modelValue","type"]),s(l(u),null,{default:o(()=>[a("i",{class:k(c.value?"pi pi-eye":"pi pi-eye-slash"),onClick:j},null,2)]),_:1})]),_:1}),s(l(b),{onClick:U,label:"비밀번호 재설정"})])])])])):(I(),x("div",L,[a("div",$,[a("div",z,[a("div",D,[e[6]||(e[6]=a("img",{src:V,class:"mb-10"},null,-1)),s(l(v),null,{default:o(()=>[s(l(u),null,{default:o(()=>e[4]||(e[4]=[a("i",{class:"pi pi-user"},null,-1)])),_:1}),s(l(w),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=r=>i.value=r),type:"text",placeholder:"ID",autofocus:"",fluid:""},null,8,["modelValue"])]),_:1}),s(l(v),null,{default:o(()=>[s(l(u),null,{default:o(()=>e[5]||(e[5]=[a("i",{class:"pi pi-mobile"},null,-1)])),_:1}),s(l(w),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),type:"text",placeholder:"전화번호",fluid:""},null,8,["modelValue"])]),_:1}),a("div",E,[s(l(b),{class:"md:w-1/2",onClick:A,label:"뒤로"}),s(l(b),{class:"md:w-1/2",onClick:N,label:"비밀번호 재설정"})])])])])]))}};export{Z as default};
