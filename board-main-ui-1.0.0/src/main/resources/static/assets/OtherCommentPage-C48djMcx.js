import{s as u}from"./index-BUPveENK.js";import{s as c,a as q}from"./index-Daet33y_.js";import{s as G}from"./index-POF9V-PZ.js";import{q as I,C as M,t as N,v as p,z as B,o as C,e as g,j as m,n as a,w,u as l,G as V,F as L,D as h,A as f}from"./index-rWrCVdvU.js";import"./index-C8irRjjW.js";import"./index-tOX5CAHA.js";import"./index-CiqZlgx1.js";const R={class:"card"},H={key:0,class:"flex ml-16 mr-16"},J={key:1,class:"flex ml-16 mr-16"},K={class:"text-left mr-16 flex justify-end"},te={__name:"OtherCommentPage",props:{boardGuid:String},setup(k){const y=k,S=I(),b=M(),d=N(),x=p([]),r=p(""),n=p(!1),o=p(""),i=p(""),A=t=>{const e=b.getUserAccess.ugd;return e?h(e)===t:!1},T=t=>{const e=b.getUserAccess.ugd;return e?h(e)===t||h(b.getUserRole)==="manager":!1},$=()=>{r.value===""||r.value===null?d.setToastValue({severity:"warn",summary:"댓글 등록",detail:"댓글을 입력해주세요.",life:3e3}):O()},P=()=>{o.value===""||o.value===null?d.setToastValue({severity:"warn",summary:"댓글 수정",detail:"댓글을 입력해주세요.",life:3e3}):U()},z=(t,e)=>{n.value=!0,i.value=t,o.value=e},E=()=>{n.value=!1,o.value="",i.value=""},F=()=>{const t=y.boardGuid;S.push({name:"OtherViewPage",params:{boardGuid:t}}).catch(()=>{console.log("OtherViewPageError")})},O=async()=>{await f.requestAPI({headers:{accept:"application/json"},method:"POST",url:"/board/free/comment/regist",data:{boardGuid:y.boardGuid,comment:r.value}})==="success"&&(d.setToastValue({severity:"success",summary:"댓글 등록",detail:"댓글 등록에 성공했습니다.",life:3e3}),r.value="",n.value=!1,o.value="",i.value="",v())},U=async()=>{await f.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/board/free/comment/update",data:{commentGuid:i.value,commentString:o.value}})==="success"&&(d.setToastValue({severity:"success",summary:"댓글 수정",detail:"댓글 수정에 성공했습니다.",life:3e3}),n.value=!1,r.value="",o.value="",i.value="",v())},j=async t=>{await f.requestAPI({headers:{accept:"application/json"},method:"DELETE",url:`/board/free/comment/delete/${t}`})==="success"&&(d.setToastValue({severity:"success",summary:"댓글 삭제",detail:"댓글이 삭제되었습니다.",life:3e3}),r.value="",n.value=!1,o.value="",i.value="",v())},v=async()=>{const t=await f.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/board/free/comment/list/all",params:{freeGuid:y.boardGuid}});for(let e in t)t[e].boardCommentDate=t[e].boardCommentDate.split("T")[0];x.value=t};return B(()=>{v()}),(t,e)=>(C(),g(L,null,[e[6]||(e[6]=m("div",{class:"text-left ml-16 mt-16 mb-10"},[m("h2",{class:"text-8xl mb-5 text-black"},"댓글")],-1)),m("div",R,[a(l(q),{class:"ml-16 mr-16",value:x.value,paginator:"",rows:5,tableStyle:"min-width: 50rem"},{default:w(()=>[a(l(c),{field:"boardComment",header:"댓글내용",style:{width:"50%"}}),a(l(c),{field:"boardCommentMemberNickName",header:"작성자",style:{width:"15%"}}),a(l(c),{field:"boardCommentDate",header:"작성일",style:{width:"15%"}}),a(l(c),{style:{width:"10%"}},{body:w(s=>[a(l(u),{label:"수정",rounded:"",class:"mr-2",severity:"info",onClick:D=>z(s.data.boardCommentGuid,s.data.boardComment),style:V(A(s.data.boardCommentMemberGuid)?"":"display: none")},null,8,["onClick","style"])]),_:1}),a(l(c),{style:{width:"10%"}},{body:w(s=>[a(l(u),{label:"삭제",rounded:"",class:"mr-2",severity:"danger",onClick:D=>j(s.data.boardCommentGuid),style:V(T(s.data.boardCommentMemberGuid)?"":"display: none")},null,8,["onClick","style"])]),_:1})]),_:1},8,["value"])]),e[7]||(e[7]=m("hr",{class:"mt-5 ml-16 mr-16 mb-5"},null,-1)),n.value?(C(),g("div",J,[a(l(G),{style:{width:"1350px",height:"50px","font-size":"20px"},modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value=s)},null,8,["modelValue"]),a(l(u),{label:"수정",size:"large",severity:"info",style:{width:"65px"},onClick:e[3]||(e[3]=s=>P())}),a(l(u),{label:"취소",size:"large",style:{width:"65px"},onClick:e[4]||(e[4]=s=>E())})])):(C(),g("div",H,[a(l(G),{style:{width:"1350px",height:"50px","font-size":"20px"},modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s)},null,8,["modelValue"]),a(l(u),{label:"등록",size:"large",style:{width:"65px"},onClick:e[1]||(e[1]=s=>$())})])),e[8]||(e[8]=m("hr",{class:"mt-5 ml-16 mr-16 mb-10"},null,-1)),m("div",K,[a(l(u),{label:"뒤로가기",size:"large",class:"mr-2",onClick:e[5]||(e[5]=s=>F())})])],64))}};export{te as default};
