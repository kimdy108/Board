import{s as N}from"./index-K56FDctV.js";import{s as d}from"./index-BAKYOd6c.js";import{s as S}from"./index-BvRL5P7J.js";import{x as q,y as I,t as p,aN as O,o as i,f as V,w as L,j as l,e as c,k as z,r as R,F as H,n as m,u as o,A as y,a7 as g,D as h,z as w}from"./index-ELgps0j8.js";import"./index-DwJEJvq7.js";const J={class:"text-left divide-y ml-5"},K={key:0},Q={class:"font-bold mt-5"},W={class:"text-xl"},X={class:"text-2xl mt-3"},Y={key:1},Z={key:0,class:"flex justify-end"},ee={key:1,class:"flex justify-end"},te={class:"mb-5 ml-5"},se={class:"flex justify-end mr-1"},ie={__name:"OtherCommentPage",props:{showModal:Boolean,boardGuid:String},emits:{closeCommentModal:Boolean},setup(G,{emit:A}){const C=G,T=A,x=q(),v=I(),k=p([]),n=p(""),u=p(!1),a=p(""),r=p(""),M=()=>{T("closeCommentModal")},_=t=>{const e=x.getUserAccess.ugd;return e?w(e)===t:!1},j=t=>{const e=x.getUserAccess.ugd;return e?w(e)===t||w(x.getUserRole)==="manager":!1},U=()=>{n.value===""||n.value===null?v.setToastValue({severity:"warn",summary:"댓글 등록",detail:"댓글을 입력해주세요.",life:3e3}):$()},D=()=>{a.value===""||a.value===null?v.setToastValue({severity:"warn",summary:"댓글 수정",detail:"댓글을 입력해주세요.",life:3e3}):B()},F=t=>{u.value=!0,r.value=t.boardCommentGuid,a.value=t.boardComment},P=()=>{u.value=!1,a.value="",r.value=""},$=async()=>{await y.requestAPI({headers:{accept:"application/json"},method:"POST",url:"/board/free/comment/regist",data:{boardGuid:C.boardGuid,comment:n.value}})==="success"&&(v.setToastValue({severity:"success",summary:"댓글 등록",detail:"댓글 등록에 성공했습니다.",life:3e3}),n.value="",u.value=!1,a.value="",r.value="",b())},B=async()=>{await y.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/board/free/comment/update",data:{commentGuid:r.value,commentString:a.value}})==="success"&&(v.setToastValue({severity:"success",summary:"댓글 수정",detail:"댓글 수정에 성공했습니다.",life:3e3}),u.value=!1,n.value="",a.value="",r.value="",b())},E=async t=>{await y.requestAPI({headers:{accept:"application/json"},method:"DELETE",url:`/board/free/comment/delete/${t}`})==="success"&&(v.setToastValue({severity:"success",summary:"댓글 삭제",detail:"댓글이 삭제되었습니다.",life:3e3}),n.value="",u.value=!1,a.value="",r.value="",b())},b=async()=>{const t=await y.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/board/free/comment/list/all",params:{freeGuid:C.boardGuid}});for(let e in t)t[e].boardCommentDate=t[e].boardCommentDate.split("T")[0];k.value=t};return O(()=>C.showModal,t=>{t&&b()}),(t,e)=>(i(),V(o(N),{visible:G.showModal,modal:"",closable:!1,class:"w-11/12"},{default:L(()=>[e[5]||(e[5]=l("div",{class:"text-left mb-10 ml-5"},[l("h2",{class:"text-4xl"},"댓글")],-1)),l("div",J,[k.value.length===0?(i(),c("div",K,e[4]||(e[4]=[l("div",{class:"text-2xl font-bold mt-5 mb-5"},"등록된 댓글이 없습니다.",-1)]))):z("",!0),(i(!0),c(H,null,R(k.value,s=>(i(),c("div",{key:s.boardCommentGuid,class:"mb-5"},[l("div",Q,g(s.boardCommentMemberNickName),1),l("div",W,g(s.boardCommentDate),1),l("div",X,[u.value&&r.value===s.boardCommentGuid?(i(),V(o(S),{key:0,class:"w-full mb-1",type:"text",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=f=>a.value=f)},null,8,["modelValue"])):(i(),c("div",Y,g(s.boardComment),1))]),u.value&&r.value===s.boardCommentGuid?(i(),c("div",Z,[m(o(d),{label:"수정",class:"mr-2",severity:"info",onClick:e[1]||(e[1]=f=>D())}),m(o(d),{label:"취소",class:"mr-2",severity:"danger",onClick:e[2]||(e[2]=f=>P())})])):(i(),c("div",ee,[m(o(d),{label:"수정",class:"mr-2",severity:"info",onClick:f=>F(s),style:h(_(s.boardCommentMemberGuid)?"":"display: none")},null,8,["onClick","style"]),m(o(d),{label:"삭제",class:"mr-2",severity:"danger",onClick:f=>E(s.boardCommentGuid),style:h(j(s.boardCommentMemberGuid)?"":"display: none")},null,8,["onClick","style"])]))]))),128))]),e[6]||(e[6]=l("hr",{class:"mb-5 ml-5"},null,-1)),l("div",te,[m(o(S),{class:"w-11/12",type:"text",modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=s=>n.value=s)},null,8,["modelValue"]),m(o(d),{onClick:U,class:"ml-5",label:"등록"})]),e[7]||(e[7]=l("hr",{class:"mb-5 ml-5"},null,-1)),l("div",se,[m(o(d),{label:"닫기",onClick:M})])]),_:1},8,["visible"]))}};export{ie as default};
