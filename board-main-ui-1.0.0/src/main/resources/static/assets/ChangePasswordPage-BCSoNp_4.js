import{_ as B}from"./board-BFWOEN-2.js";import{s as g}from"./index-BAKYOd6c.js";import{s as u,a as w}from"./index-BeEWSCfJ.js";import{s as y}from"./index-BvRL5P7J.js";import{s as M}from"./index-K56FDctV.js";import{y as S,t as r,f as U,w as o,u as s,o as $,j as a,n as l,G as V,A as j,E as b}from"./index-ELgps0j8.js";import"./index-DwJEJvq7.js";const O={class:"bg-cover bg-center bg-fixed"},q={class:"flex justify-center items-center"},z={class:"flex flex-col gap-6 w-2/3 mt-10"},E={class:"flex"},Q={__name:"ChangePasswordPage",props:{showModal:Boolean},emits:{closeChangePasswordModal:Boolean},setup(h,{emit:x}){const C=x,n=S(),d=r(!1),p=r(!1),c=r(!1),t=r(""),f=r(""),m=r(""),_=()=>{d.value=!1,p.value=!1,c.value=!1,t.value="",f.value="",m.value=""},P=()=>{_(),C("closeChangePasswordModal")},k=()=>{d.value=!d.value},N=()=>{p.value=!p.value},T=()=>{c.value=!c.value},I=()=>{t.value===""||t.value===null?n.setToastValue({severity:"warn",summary:"비밀번호 변경 오류",detail:"이전 비밀번호를 입력해주세요.",life:3e3}):f.value===m.value?A():n.setToastValue({severity:"warn",summary:"비밀번호 변경 오류",detail:"비밀번호가 일치하지 않습니다.",life:3e3})},A=async()=>{try{await j.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/member/update/password",data:{oldPassword:b(t.value),newPassword:b(f.value)}})==="success"?(n.setToastValue({severity:"success",summary:"비밀번호 변경",detail:"수정이 완료되었습니다.",life:3e3}),P()):n.setToastValue({severity:"error",summary:"비밀번호 변경 오류",detail:"수정에 실패했습니다.",life:3e3})}catch(v){console.error("API 호출 오류:",v),n.setToastValue({severity:"error",summary:"비밀번호 변경 오류",detail:"수정에 실패했습니다.",life:3e3})}};return(v,e)=>($(),U(s(M),{visible:h.showModal,modal:"",closable:!1,class:"w-1/3 h-1/2"},{default:o(()=>[a("div",O,[a("div",q,[a("div",z,[e[7]||(e[7]=a("img",{src:B,class:"mb-10"},null,-1)),l(s(w),null,{default:o(()=>[l(s(u),null,{default:o(()=>e[4]||(e[4]=[a("i",{class:"pi pi-lock"},null,-1)])),_:1}),l(s(y),{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=i=>t.value=i),type:d.value?"text":"password",placeholder:"이전 비밀번호",autofocus:"",fluid:""},null,8,["modelValue","type"]),l(s(u),null,{default:o(()=>[a("i",{class:V(d.value?"pi pi-eye":"pi pi-eye-slash"),onClick:k},null,2)]),_:1})]),_:1}),l(s(w),null,{default:o(()=>[l(s(u),null,{default:o(()=>e[5]||(e[5]=[a("i",{class:"pi pi-lock"},null,-1)])),_:1}),l(s(y),{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=i=>f.value=i),type:p.value?"text":"password",placeholder:"비밀번호",autofocus:"",fluid:""},null,8,["modelValue","type"]),l(s(u),null,{default:o(()=>[a("i",{class:V(p.value?"pi pi-eye":"pi pi-eye-slash"),onClick:N},null,2)]),_:1})]),_:1}),l(s(w),null,{default:o(()=>[l(s(u),null,{default:o(()=>e[6]||(e[6]=[a("i",{class:"pi pi-lock"},null,-1)])),_:1}),l(s(y),{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=i=>m.value=i),type:c.value?"text":"password",placeholder:"비밀번호 확인",fluid:""},null,8,["modelValue","type"]),l(s(u),null,{default:o(()=>[a("i",{class:V(c.value?"pi pi-eye":"pi pi-eye-slash"),onClick:T},null,2)]),_:1})]),_:1}),a("div",E,[l(s(g),{onClick:e[3]||(e[3]=i=>P()),label:"닫기",style:{width:"200px"},severity:"info",outlined:""}),l(s(g),{onClick:I,label:"비밀번호 변경",style:{width:"200px"},severity:"danger",outlined:""})])])])])]),_:1},8,["visible"]))}};export{Q as default};
