import{_ as x}from"./board-BFWOEN-2.js";import{y as B,q as E,t as r,u as l,e as k,j as a,n as s,w as t,o as T,G as I,A as C,E as V,z as L}from"./index-ELgps0j8.js";import{s as b}from"./index-BAKYOd6c.js";import{s as n,a as y}from"./index-BeEWSCfJ.js";import{s as g}from"./index-BvRL5P7J.js";const $={key:0},z={class:"bg-cover bg-center bg-fixed"},R={class:"h-screen flex justify-center items-center"},D={class:"w-full sm:w-80 flex flex-col gap-6 shadow-lg w-full p-16 md:w-1/3 lg:w-1/4"},M={class:"flex items-center"},F={key:1},H={class:"bg-cover bg-center bg-fixed"},J={class:"h-screen flex justify-center items-center"},K={class:"w-full sm:w-80 flex flex-col gap-6 shadow-lg w-full p-16 md:w-1/3 lg:w-1/4"},ee={__name:"ResetPasswordPage",setup(O){const o=B(),h=E();let _=r(!1);const p=r(!1),f=r(!1),d=r(""),v=r(""),c=r(""),i=r("");let m=null;const P=r(null),A=()=>{h.push({name:"LoginPage"}).catch(()=>{console.log("loginerror")})},N=()=>{d.value==""?o.setToastValue({severity:"warn",summary:"비밀번호 재설정 오류",detail:"아이디를 입력해주세요.",life:3e3}):v.value==""?o.setToastValue({severity:"warn",summary:"비밀번호 재설정 오류",detail:"휴대폰 번호를 입력해주세요.",life:3e3}):G()},S=()=>{c.value==""||c.value==null||i.value==""||i.value==null?o.setToastValue({severity:"warn",summary:"비밀번호 재설정 오류",detail:"비밀번호를 입력해주세요.",life:3e3}):c.value!==i.value?o.setToastValue({severity:"warn",summary:"비밀번호 재설정 오류",detail:"비밀번호가 일치하지 않습니다.",life:3e3}):q()},U=()=>{p.value=!p.value},j=()=>{f.value=!f.value},G=async()=>{try{m=await C.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/member/check/reset/password",params:{id:V(d.value),userPhone:V(v.value)}}),L(m.memberId)===d.value?(P.value=m,_.value=!0):o.setToastValue({severity:"error",summary:"비밀번호 재설정 오류",detail:"정보가 일치하지 않습니다.",life:3e3})}catch(w){console.error("API 호출 오류:",w),o.setToastValue({severity:"error",summary:"비밀번호 재설정 오류",detail:"정보가 일치하지 않습니다.",life:3e3})}},q=async()=>{try{m=await C.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/member/reset/password",data:{userId:P.value.memberId,userGuid:P.value.memberGuid,password:V(i.value)}}),m==="success"?(o.setToastValue({severity:"success",summary:"비밀번호 재설정",detail:"비밀번호 재설정이 완료되었습니다.",life:3e3}),h.push({name:"LoginPage"}).catch(()=>{console.log("loginerror")})):o.setToastValue({severity:"error",summary:"비밀번호 재설정 오류",detail:"비밀번호 재설정이 실패했습니다.",life:3e3})}catch(w){console.error("API 호출 오류:",w),o.setToastValue({severity:"error",summary:"비밀번호 재설정 오류",detail:"비밀번호 재설정이 실패했습니다.",life:3e3})}};return(w,e)=>l(_)?(T(),k("div",F,[a("div",H,[a("div",J,[a("div",K,[e[9]||(e[9]=a("img",{src:x,class:"mb-10"},null,-1)),s(l(y),null,{default:t(()=>[s(l(n),null,{default:t(()=>e[7]||(e[7]=[a("i",{class:"pi pi-lock"},null,-1)])),_:1}),s(l(g),{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=u=>c.value=u),type:p.value?"text":"password",placeholder:"비밀번호",autofocus:"",fluid:""},null,8,["modelValue","type"]),s(l(n),null,{default:t(()=>[a("i",{class:I(p.value?"pi pi-eye":"pi pi-eye-slash"),onClick:U},null,2)]),_:1})]),_:1}),s(l(y),null,{default:t(()=>[s(l(n),null,{default:t(()=>e[8]||(e[8]=[a("i",{class:"pi pi-lock"},null,-1)])),_:1}),s(l(g),{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=u=>i.value=u),type:f.value?"text":"password",placeholder:"비밀번호 확인",fluid:""},null,8,["modelValue","type"]),s(l(n),null,{default:t(()=>[a("i",{class:I(f.value?"pi pi-eye":"pi pi-eye-slash"),onClick:j},null,2)]),_:1})]),_:1}),s(l(b),{onClick:S,label:"비밀번호 재설정"})])])])])):(T(),k("div",$,[a("div",z,[a("div",R,[a("div",D,[e[6]||(e[6]=a("img",{src:x,class:"mb-10"},null,-1)),s(l(y),null,{default:t(()=>[s(l(n),null,{default:t(()=>e[4]||(e[4]=[a("i",{class:"pi pi-user"},null,-1)])),_:1}),s(l(g),{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=u=>d.value=u),type:"text",placeholder:"ID",autofocus:"",fluid:""},null,8,["modelValue"])]),_:1}),s(l(y),null,{default:t(()=>[s(l(n),null,{default:t(()=>e[5]||(e[5]=[a("i",{class:"pi pi-mobile"},null,-1)])),_:1}),s(l(g),{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=u=>v.value=u),type:"text",placeholder:"전화번호",fluid:""},null,8,["modelValue"])]),_:1}),a("div",M,[s(l(b),{class:"md:w-1/2",onClick:A,label:"뒤로"}),s(l(b),{class:"md:w-1/2",onClick:N,label:"비밀번호 재설정"})])])])])]))}};export{ee as default};
