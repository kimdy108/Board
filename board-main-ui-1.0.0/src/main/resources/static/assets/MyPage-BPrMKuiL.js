import{s as c}from"./index-DUVqnvLL.js";import{s as m}from"./index-DYQKO0NT.js";import{p as I,x as A,q as r,v as C,d as F,h as l,l as t,u as a,y as b,F as M,z as n,C as _,A as P,o as j,t as g}from"./index-MLJOWxPO.js";import"./index-CHNytka8.js";const q={class:"card flex"},B={class:"gap-2 text-left ml-16"},O={class:"gap-2 text-left ml-16"},R={class:"card flex mt-16"},T={class:"gap-2 text-left ml-16"},G={class:"gap-2 text-left ml-16"},$={class:"card flex mt-16"},D={class:"gap-2 text-left ml-16"},H={class:"gap-2 text-left ml-16"},J={class:"text-left mr-16 flex justify-end"},Y={__name:"MyPage",setup(K){const p=I(),v=A(),x=r(""),u=r(""),f=r(""),i=r(""),d=r(""),y=r(!1),h=r(!1),k=()=>{n(v.getUserRole)==="manager"&&(y.value=!0)},z=()=>{n(v.getUserAccess.uid)===_("admin")&&(h.value=!0)},N=()=>{p.push({name:"ChangePasswordPage"}).catch(()=>{console.log("ChangePasswordPageError")})},U=()=>{p.push({name:"SignOutPage"}).catch(()=>{console.log("SignOutPageError")})},S=()=>{p.push({name:"PromoteManagerPage"}).catch(()=>{console.log("PromoteManagerPageError")})},w=()=>{u.value==null||u.value==""?alert("이름을 입력해주세요."):i.value==null||i.value==""?alert("이메일을 입력해주세요."):d.value==null||d.value==""?alert("전화번호를 입력해주세요."):E()},V=async()=>{const o=await P.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/member/info"});x.value=n(o.userId),u.value=n(o.userName),f.value=n(o.userNickName),i.value=n(o.userEmail),d.value=n(o.userPhone)},E=async()=>{await P.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/member/update",data:{encryptUserName:g(u.value),encryptUserEmail:g(i.value),encryptUserPhone:g(d.value)}})==="success"?(alert("수정되었습니다."),V()):alert("수정에 실패했습니다.")};return C(()=>{V(),k(),z()}),(o,e)=>(j(),F(M,null,[e[10]||(e[10]=l("div",{class:"text-left text-black"},[l("div",{class:"ml-5 text-6xl p-10"},"마이페이지")],-1)),l("div",q,[l("div",B,[e[5]||(e[5]=l("label",{for:"userId",class:"flex flex-col text-3xl text-black"},"아이디",-1)),t(a(c),{id:"userId",modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),size:"large",style:{width:"650px",height:"50px","font-size":"20px"},disabled:""},null,8,["modelValue"])]),l("div",O,[e[6]||(e[6]=l("label",{for:"userName",class:"flex flex-col text-3xl text-black"},"이름",-1)),t(a(c),{id:"userName",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])])]),l("div",R,[l("div",T,[e[7]||(e[7]=l("label",{for:"userNickName",class:"flex flex-col text-3xl text-black"},"닉네임",-1)),t(a(c),{id:"userNickName",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),size:"large",style:{width:"650px",height:"50px","font-size":"20px"},disabled:""},null,8,["modelValue"])]),l("div",G,[t(a(m),{label:"비밀번호 변경",size:"large",class:"mt-10",onClick:N})])]),l("div",$,[l("div",D,[e[8]||(e[8]=l("label",{for:"userEmail",class:"flex flex-col text-3xl text-black"},"이메일",-1)),t(a(c),{id:"userEmail",modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=s=>i.value=s),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])]),l("div",H,[e[9]||(e[9]=l("label",{for:"userPhone",class:"flex flex-col text-3xl text-black"},"전화번호",-1)),t(a(c),{id:"userPhone",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])])]),e[11]||(e[11]=l("hr",{class:"mt-16 ml-16 mr-16 mb-10"},null,-1)),l("div",J,[t(a(m),{label:"매니저 관리",size:"large",severity:"help",class:"mr-2",style:b(y.value?"":"display: none"),onClick:S},null,8,["style"]),t(a(m),{label:"회원탈퇴",size:"large",severity:"danger",class:"mr-2",onClick:U,style:b(h.value?"display: none":"")},null,8,["style"]),t(a(m),{label:"수정",size:"large",severity:"info",class:"mr-2",onClick:w})])],64))}};export{Y as default};
