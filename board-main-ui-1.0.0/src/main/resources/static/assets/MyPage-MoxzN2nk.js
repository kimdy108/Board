import{s as c}from"./index-BvRL5P7J.js";import{s as p}from"./index-BAKYOd6c.js";import{q as F,x as T,y as _,t as o,v as j,e as q,j as l,n as s,u as a,D as h,F as B,z as n,C as O,A as w,o as R,E as V}from"./index-ELgps0j8.js";import $ from"./ChangePasswordPage-BCSoNp_4.js";import"./board-BFWOEN-2.js";import"./index-BeEWSCfJ.js";import"./index-K56FDctV.js";import"./index-DwJEJvq7.js";const D={class:"card flex"},G={class:"gap-2 text-left ml-16"},H={class:"gap-2 text-left ml-16"},J={class:"card flex mt-16"},K={class:"gap-2 text-left ml-16"},L={class:"gap-2 text-left ml-16"},Q={class:"card flex mt-16"},W={class:"gap-2 text-left ml-16"},X={class:"gap-2 text-left ml-16"},Y={class:"text-left mr-16 flex justify-end"},ie={__name:"MyPage",setup(Z){const f=F(),b=T(),m=_(),x=o(""),i=o(""),g=o(""),u=o(""),d=o(""),v=o(!1),P=o(!1),y=o(!1),z=()=>{n(b.getUserRole)==="manager"&&(v.value=!0)},M=()=>{n(b.getUserAccess.uid)===O("admin")&&(P.value=!0)},N=()=>{y.value=!0},U=()=>{y.value=!1},S=()=>{f.push({name:"SignOutPage"}).catch(()=>{console.log("SignOutPageError")})},E=()=>{f.push({name:"PromoteManagerPage"}).catch(()=>{console.log("PromoteManagerPageError")})},C=()=>{f.push({name:"MemberManagePage"}).catch(()=>{console.log("MemberManagePageError")})},I=()=>{i.value==null||i.value==""?m.setToastValue({severity:"warn",summary:"개인정보 수정",detail:"이름을 입력해주세요.",life:3e3}):u.value==null||u.value==""?m.setToastValue({severity:"warn",summary:"개인정보 수정",detail:"이메일을 입력해주세요.",life:3e3}):d.value==null||d.value==""?m.setToastValue({severity:"warn",summary:"개인정보 수정",detail:"전화번호를 입력해주세요.",life:3e3}):A()},k=async()=>{const r=await w.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/member/info"});x.value=n(r.userId),i.value=n(r.userName),g.value=n(r.userNickName),u.value=n(r.userEmail),d.value=n(r.userPhone)},A=async()=>{await w.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/member/update",data:{encryptUserName:V(i.value),encryptUserEmail:V(u.value),encryptUserPhone:V(d.value)}})==="success"?(m.setToastValue({severity:"success",summary:"개인정보 수정",detail:"수정되었습니다.",life:3e3}),k()):m.setToastValue({severity:"error",summary:"개인정보 수정",detail:"수정에 실패했습니다.",life:3e3})};return j(()=>{k(),z(),M()}),(r,e)=>(R(),q(B,null,[e[10]||(e[10]=l("div",{class:"text-left text-black"},[l("div",{class:"ml-5 text-6xl p-10"},"마이페이지")],-1)),l("div",D,[l("div",G,[e[5]||(e[5]=l("label",{for:"userId",class:"flex flex-col text-3xl text-black"},"아이디",-1)),s(a(c),{id:"userId",modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=t=>x.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"},disabled:""},null,8,["modelValue"])]),l("div",H,[e[6]||(e[6]=l("label",{for:"userName",class:"flex flex-col text-3xl text-black"},"이름",-1)),s(a(c),{id:"userName",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])])]),l("div",J,[l("div",K,[e[7]||(e[7]=l("label",{for:"userNickName",class:"flex flex-col text-3xl text-black"},"닉네임",-1)),s(a(c),{id:"userNickName",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"},disabled:""},null,8,["modelValue"])]),l("div",L,[s(a(p),{label:"비밀번호 변경",size:"large",class:"mt-10",onClick:N})])]),l("div",Q,[l("div",W,[e[8]||(e[8]=l("label",{for:"userEmail",class:"flex flex-col text-3xl text-black"},"이메일",-1)),s(a(c),{id:"userEmail",modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])]),l("div",X,[e[9]||(e[9]=l("label",{for:"userPhone",class:"flex flex-col text-3xl text-black"},"전화번호",-1)),s(a(c),{id:"userPhone",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=t=>d.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])])]),e[11]||(e[11]=l("hr",{class:"mt-16 ml-16 mr-16 mb-10"},null,-1)),l("div",Y,[s(a(p),{label:"회원 관리",size:"large",severity:"warn",class:"mr-2",style:h(v.value?"":"display: none"),onClick:C},null,8,["style"]),s(a(p),{label:"매니저 관리",size:"large",severity:"help",class:"mr-2",style:h(v.value?"":"display: none"),onClick:E},null,8,["style"]),s(a(p),{label:"회원탈퇴",size:"large",severity:"danger",class:"mr-2",onClick:S,style:h(P.value?"display: none":"")},null,8,["style"]),s(a(p),{label:"수정",size:"large",severity:"info",class:"mr-2",onClick:I})]),s($,{showModal:y.value,onCloseChangePasswordModal:U},null,8,["showModal"])],64))}};export{ie as default};
