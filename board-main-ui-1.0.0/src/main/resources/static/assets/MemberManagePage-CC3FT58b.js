import{s as l,a as E}from"./index-Daet33y_.js";import{s as d}from"./index-BUPveENK.js";import{v as M,q as _,C as P,t as I,z as S,e as C,j as o,n as r,w as u,u as t,F as G,A as f,D as a,o as n,f as y,E as b,k as g}from"./index-rWrCVdvU.js";import"./index-C8irRjjW.js";import"./index-tOX5CAHA.js";import"./index-POF9V-PZ.js";import"./index-CiqZlgx1.js";const j={class:"card"},A={class:"text-left mr-5 flex justify-end"},z={__name:"MemberManagePage",setup(D){const c=M(),m=_(),p=P(),v=I(),k=()=>{m.push({name:"JoinMemberPage"}).catch(()=>{console.log("joinMemberPageError")})},w=s=>{const e=s.data.userGuid;m.push({name:"UpdateMemberPage",params:{userGuid:e}}).catch(()=>{console.log("UpdateMemberPageError")})},N=async s=>{const e=s.data.userGuid;await f.requestAPI({headers:{accept:"application/json"},method:"DELETE",url:`/member/manage/delete/${e}`})==="success"&&(v.setToastValue({severity:"success",summary:"회원 관리",detail:"회원이 삭제되었습니다.",life:3e3}),h())},h=async()=>{const s=await f.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/member/info/list"});for(let e in s)s[e].userId=a(s[e].userId),s[e].userGuid=a(s[e].userGuid),s[e].userName=a(s[e].userName),s[e].userNickName=a(s[e].userNickName),s[e].userEmail=a(s[e].userEmail),s[e].userPhone=a(s[e].userPhone),s[e].userRole=a(s[e].userRole),s[e].insertDate=s[e].insertDate.split("T")[0];c.value=s};return S(()=>{h()}),(s,e)=>(n(),C(G,null,[e[0]||(e[0]=o("div",{class:"text-left text-black"},[o("div",{class:"ml-5 text-6xl p-10"},"회원 관리")],-1)),o("div",j,[r(t(E),{value:c.value,paginator:"",rows:10,tableStyle:"min-width: 50rem",style:{"margin-left":"15px","margin-right":"15px"}},{default:u(()=>[r(t(l),{field:"userId",header:"아이디",style:{width:"15%"}}),r(t(l),{field:"userName",header:"이름",style:{width:"15%"}}),r(t(l),{field:"userNickName",header:"닉네임",style:{width:"15%"}}),r(t(l),{field:"userPhone",header:"전화번호",style:{width:"15%"}}),r(t(l),{field:"userEmail",header:"이메일",style:{width:"15%"}}),r(t(l),{field:"insertDate",header:"가입일",style:{width:"15%"}}),r(t(l),{style:{width:"5%"}},{body:u(i=>[i.data.userId!=="admin"?(n(),y(t(d),{key:0,label:"수정",rounded:"",class:"mr-2",severity:"info",disabled:t(b)(i.data.userId)===t(a)(t(p).getUserAccess.uid),onClick:x=>w(i)},null,8,["disabled","onClick"])):g("",!0)]),_:1}),r(t(l),{style:{width:"5%"}},{body:u(i=>[i.data.userId!=="admin"?(n(),y(t(d),{key:0,label:"삭제",rounded:"",class:"mr-2",severity:"danger",disabled:t(b)(i.data.userId)===t(a)(t(p).getUserAccess.uid),onClick:x=>N(i)},null,8,["disabled","onClick"])):g("",!0)]),_:1})]),_:1},8,["value"])]),e[1]||(e[1]=o("hr",{class:"mr-5 ml-5 mt-5 mb-5"},null,-1)),o("div",A,[r(t(d),{label:"회원 등록",size:"large",severity:"help",onClick:k})])],64))}};export{z as default};
