import{s as c}from"./index-POF9V-PZ.js";import{s as p}from"./index-BUPveENK.js";import{q as A,C,t as F,v as r,z as T,e as j,j as l,n as s,u as a,G as y,F as _,D as n,E as q,A as k,o as B,y as V}from"./index-rWrCVdvU.js";const O={class:"card flex"},G={class:"gap-2 text-left ml-16"},R={class:"gap-2 text-left ml-16"},D={class:"card flex mt-16"},$={class:"gap-2 text-left ml-16"},H={class:"gap-2 text-left ml-16"},J={class:"card flex mt-16"},K={class:"gap-2 text-left ml-16"},L={class:"gap-2 text-left ml-16"},Q={class:"text-left mr-16 flex justify-end"},ee={__name:"MyPage",setup(W){const g=A(),h=C(),m=F(),x=r(""),u=r(""),f=r(""),i=r(""),d=r(""),v=r(!1),b=r(!1),z=()=>{n(h.getUserRole)==="manager"&&(v.value=!0)},N=()=>{n(h.getUserAccess.uid)===q("admin")&&(b.value=!0)},U=()=>{g.push({name:"ChangePasswordPage"}).catch(()=>{console.log("ChangePasswordPageError")})},w=()=>{g.push({name:"SignOutPage"}).catch(()=>{console.log("SignOutPageError")})},S=()=>{g.push({name:"PromoteManagerPage"}).catch(()=>{console.log("PromoteManagerPageError")})},E=()=>{g.push({name:"MemberManagePage"}).catch(()=>{console.log("MemberManagePageError")})},M=()=>{u.value==null||u.value==""?m.setToastValue({severity:"warn",summary:"개인정보 수정",detail:"이름을 입력해주세요.",life:3e3}):i.value==null||i.value==""?m.setToastValue({severity:"warn",summary:"개인정보 수정",detail:"이메일을 입력해주세요.",life:3e3}):d.value==null||d.value==""?m.setToastValue({severity:"warn",summary:"개인정보 수정",detail:"전화번호를 입력해주세요.",life:3e3}):I()},P=async()=>{const o=await k.requestAPI({headers:{accept:"application/json"},method:"GET",url:"/member/info"});x.value=n(o.userId),u.value=n(o.userName),f.value=n(o.userNickName),i.value=n(o.userEmail),d.value=n(o.userPhone)},I=async()=>{await k.requestAPI({headers:{accept:"application/json"},method:"PUT",url:"/member/update",data:{encryptUserName:V(u.value),encryptUserEmail:V(i.value),encryptUserPhone:V(d.value)}})==="success"?(m.setToastValue({severity:"success",summary:"개인정보 수정",detail:"수정되었습니다.",life:3e3}),P()):m.setToastValue({severity:"error",summary:"개인정보 수정",detail:"수정에 실패했습니다.",life:3e3})};return T(()=>{P(),z(),N()}),(o,e)=>(B(),j(_,null,[e[10]||(e[10]=l("div",{class:"text-left text-black"},[l("div",{class:"ml-5 text-6xl p-10"},"마이페이지")],-1)),l("div",O,[l("div",G,[e[5]||(e[5]=l("label",{for:"userId",class:"flex flex-col text-3xl text-black"},"아이디",-1)),s(a(c),{id:"userId",modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=t=>x.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"},disabled:""},null,8,["modelValue"])]),l("div",R,[e[6]||(e[6]=l("label",{for:"userName",class:"flex flex-col text-3xl text-black"},"이름",-1)),s(a(c),{id:"userName",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])])]),l("div",D,[l("div",$,[e[7]||(e[7]=l("label",{for:"userNickName",class:"flex flex-col text-3xl text-black"},"닉네임",-1)),s(a(c),{id:"userNickName",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"},disabled:""},null,8,["modelValue"])]),l("div",H,[s(a(p),{label:"비밀번호 변경",size:"large",class:"mt-10",onClick:U})])]),l("div",J,[l("div",K,[e[8]||(e[8]=l("label",{for:"userEmail",class:"flex flex-col text-3xl text-black"},"이메일",-1)),s(a(c),{id:"userEmail",modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])]),l("div",L,[e[9]||(e[9]=l("label",{for:"userPhone",class:"flex flex-col text-3xl text-black"},"전화번호",-1)),s(a(c),{id:"userPhone",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=t=>d.value=t),size:"large",style:{width:"650px",height:"50px","font-size":"20px"}},null,8,["modelValue"])])]),e[11]||(e[11]=l("hr",{class:"mt-16 ml-16 mr-16 mb-10"},null,-1)),l("div",Q,[s(a(p),{label:"회원 관리",size:"large",severity:"warn",class:"mr-2",style:y(v.value?"":"display: none"),onClick:E},null,8,["style"]),s(a(p),{label:"매니저 관리",size:"large",severity:"help",class:"mr-2",style:y(v.value?"":"display: none"),onClick:S},null,8,["style"]),s(a(p),{label:"회원탈퇴",size:"large",severity:"danger",class:"mr-2",onClick:w,style:y(b.value?"display: none":"")},null,8,["style"]),s(a(p),{label:"수정",size:"large",severity:"info",class:"mr-2",onClick:M})])],64))}};export{ee as default};
